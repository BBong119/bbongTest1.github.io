{% assign curPageFileName = page.url | split: '/' | last | replace: '.html', '' %}
{% assign curPathName = page.url | split: curPageFileName | first %}

{% capture curPageFileNameWithoutVer %}	
{% if curPageFileName contains '_v' %}	
{{ curPageFileName | split: '_v' | first }}
{% else %}
{{ curPageFileName }}
{% endif %}
{% endcapture %}


{% for my_page in site.pages %}
	{% assign tmpPageFileName = my_page.url | split: '/' | last | replace: '.html', '' %}		
	{% assign tmpPathName = my_page.url | split: tmpPageFileName | first %}		
	{% if curPathName == tmpPathName and tmpPageFileName != curPageFileName %}		
		{% capture tmpPageFileNameWithoutVer %}		
		{% if tmpPageFileName contains '_v' %}		
		{{ tmpPageFileName | split: '_v' | first }}			
		{% else %}		
		{{ tmpPageFileName }}			
		{% endif %}
		{% endcapture %}
		{% assign a1 = tmpPageFileNameWithoutVer | strip %}	
		{% assign a2 = curPageFileNameWithoutVer | strip %}
		{% if a1 == a2 %}	
			{% if tmpPageFileName contains '_v' %}			
				{% capture liName %} version {{ tmpPageFileName |  split: '_v' | last }} {% endcapture %}			
				<li><a href = "{{ my_page.url }}">{{ liName }}</a></li>				
			{% else %}
				<li><a href = "{{ my_page.url }}">latest version</a></li>	
			{% endif %}
		{% endif %}
	{% endif %}	
{% endfor %}
